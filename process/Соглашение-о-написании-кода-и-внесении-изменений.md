# Соглашение о написании кода и внесении изменений в конфигурацию TopLog WMS

### Правила работы с хранилищем конфигурации
1. Совместная разработка конфигурации поставки и проектов внедрения выполняется посредством хранилищ конфигурации 1С, расположенных на сервере по пути рода:
    >http://10.10.0.30/repository/repository.1ccr/%ИмяХранилища%
2. Разработка ведется через базу на своем компьютере или базу с постфиксом "_dev" на сервере.
3. Публикация изменений выполняется только через базу с постфиксом "_dev" на сервере (для получения изменений в базах на своих компьютерах выполнять обновление из хранилища без подключения базы).
4. Объекты в хранилище нужно захватывать **ДО** начала внесения изменений.
5. В случае необходимости добавления нового объекта в дерево метаданных, нужно согласовать это с руководителем.



### Правила написания комментариев к версиям хранилища конфигурации
1. В поле "Комментарий" нужно кратко документировать внесенные изменения
2. В конце комментария нужно оставить ссылку на задачу
3. Если в версии добавлены новые объекты (прим. добавлены объекты метаданных, их реквизиты, формы, макеты) или реализована новая функциональность (которой раньше не было - прим. добавлено сообщение), строки описания этого изменения нужно снабжать префиксом "[Add]"
4. Если в версии изменено поведение имеющихся объектов (прим. изменен обработчик ПередЗаписью, переименованы объекты метаданных, их реквизиты, формы, макеты) или изменена имеющаяся функциональность (прим. изменено ранее выводимое сообщение), строки описания этого изменения нужно снабжать префиксом "[Mod]"
5. Если в версии удалены имеющиеся объекты (прим. удалены объекты метаданных, их реквизиты, формы, макеты) или удалена имеющаяся функциональность (прим. удалена функция или обработчики некоторого правила), строки описания этого изменения нужно снабжать префиксом "[Del]"
6. Если в версии исправлены ошибки, строки описания этого изменения нужно снабжать префиксом "[Fix]"
7. Приоритетность помещения строк описания по префиксам внутри комментария (от наиболее приоритетного к наименее приоритетному):
    1. [Fix]
    2. [Del]
    3. [Mod]
    4. [Add]
8. Пример корректного комментария к версии:
    ```
    [Fix] Функционал товароведа (проверка качества). Исправлены такие-то ошибки в обработке
    [Mod] Функционал товароведа (проверка качества). Изменено поведение обработки таким-то образом
    [Add] Функционал товароведа. Реализован отчет Проверка качества

    https://toplogwms.aspro.cloud/_module/task/view/task/862
    https://toplogwms.flowlu.ru/_module/task/view/task/539
    ```



### Правила внесения изменений в конфигурацию
1. В коде не должно присутствовать никаких фамилий и закомментированного кода. В случае, если вы встречаете это в коде - удаляйте
2. Реализованные блоки кода должны быть прокомментированы
3. Следует избегать большой когнитивной сложности (высокий уровень вложенности условных конструкций и циклов)
4. В случае необходимости внесения изменений в метаданные (создание/изменение справочников, документов, регистров), такие изменения должны быть согласованы с руководителем отд. разработки
5. При внесении изменений в конфигурацию расширения не используются
6. Изменения, внесенные в ОМ.Регистры, могут быть помещены в хранилище **ТОЛЬКО ПОСЛЕ** проверки руководителем отд. разработки
7. Исполняемый код (кроме обмена данными) не должен содержать в себе вызовы поиска элементов базы данных по константе (код, наименование, ссылка). Вместо этого следует использовать предопределенные элементы и правила товародвижения/выполнения/лимиты



### Правила работы с корнем конфигурации.
1. Корень не должен быть долго захвачен. Работа с корнем производится рода: захватил - создал нужные объекты - поместил - редактирую дальше только свои объекты

